#:import MeshLinePlot kivy_garden.graph.MeshLinePlot

<serialWindow>:
    name: 'serial'
    
    FloatLayout:
        canvas:
            Color:
                rgb: 1,0,0
            Rectangle:
                pos: 0.3, 0.9
                size: 0.1, 0.05
        Button:
            pos_hint: {'x': 0, 'top': 1}
            size_hint: 0.25, 0.1
            text: 'Serial'
            bold: True
            background_normal: ''
            background_color: [53/255, 69/255, 81/255,1]
            on_press:
                root.manager.transition.duration = '0.0'
                root.manager.current = 'serial'
        Button:
            pos_hint: {'x': 0.25, 'top': 1}
            size_hint: 0.25, 0.1
            text: 'Calibration'
            bold: True
            background_normal: ''
            background_color: [28/255, 76/255, 116/255,1]
            on_press:
                root.manager.transition.duration = '0.0'
                root.manager.current = 'calibration'
        Button:
            pos_hint: {'x': 0.50, 'top': 1}
            size_hint: 0.25, 0.1
            text: 'Debug Mode'
            bold: True
            background_normal: ''
            background_color: [100/255, 140/255, 172/255,1]
            on_press:
                root.manager.transition.duration = '0.0'
                root.manager.current = 'debug'
        Button:
            pos_hint: {'x': 0.75, 'top': 1}
            size_hint: 0.25, 0.1
            text: 'FES Mode'
            bold: True
            background_normal: ''
            background_color: [108/255, 180/255, 228/255,1]
            on_press:
                root.manager.transition.duration = '0.0'
                root.manager.current = 'fes'

        Label:
            pos_hint: {'x': 0.0, 'top': 0.1}
            size_hint: 0.25, 0.15
            text: 'Connected'
        Label:
            pos_hint: {'x': 0.5, 'top': 0.1}
            size_hint: 0.25, 0.15
            text: 'Recording'


        

        
            

        

<calibrationWindow>:
    name: 'calibration'

    ltval: ltVal
    lhVal: lhVal
    rtVal: rtVal
    rhVal: rhVal

    FloatLayout:
        Button:
            pos_hint: {'x': 0, 'top': 1}
            size_hint: 0.25, 0.1
            text: 'Serial'
            bold: True
            background_normal: ''
            background_color: [53/255, 69/255, 81/255,1]
            on_press:
                root.manager.transition.duration = '0.0'
                root.manager.current = 'serial'
        Button:
            pos_hint: {'x': 0.25, 'top': 1}
            size_hint: 0.25, 0.1
            text: 'Calibration'
            bold: True
            background_normal: ''
            background_color: [28/255, 76/255, 116/255,1]
            on_press:
                root.manager.transition.duration = '0.0'
                root.manager.current = 'calibration'
        Button:
            pos_hint: {'x': 0.50, 'top': 1}
            size_hint: 0.25, 0.1
            text: 'Debug Mode'
            bold: True
            background_normal: ''
            background_color: [100/255, 140/255, 172/255,1]
            on_press:
                root.manager.transition.duration = '0.0'
                root.manager.current = 'debug'
        Button:
            pos_hint: {'x': 0.75, 'top': 1}
            size_hint: 0.25, 0.1
            text: 'FES Mode'
            bold: True
            background_normal: ''
            background_color: [108/255, 180/255, 228/255,1]
            on_press:
                root.manager.transition.duration = '0.0'
                root.manager.current = 'fes'
        Label:
            pos_hint: {'x': 0.0, 'top': 0.1}
            size_hint: 0.25, 0.15
            text: 'Connected'
        Label:
            pos_hint: {'x': 0.5, 'top': 0.1}
            size_hint: 0.25, 0.15
            text: 'Recording'

        # Interaction Labels and Buttons***********************************
        # Calibration start/stop
        Label:
            pos_hint: {'x': 0.05, 'top': 0.85}
            size_hint: 0.2, 0.1
            text: 'Calibrate FSR'
        Button:
            pos_hint: {'x': 0.05, 'top': 0.75}
            size_hint: 0.2, 0.1
            text: 'Start'
            bold: True
            on_press:
                root.startFSRCalibration()
        Button:
            pos_hint: {'x': 0.25, 'top': 0.75}
            size_hint: 0.2, 0.1
            text: 'End'
            bold: True
            on_press:
                root.endFSRCalibration()
        Button:
            pos_hint: {'x': 0.05, 'top': 0.2}
            size_hint: 0.2, 0.1
            text: 'Set Thresholds'
            bolt: True
            on_press:
                root.setFSRThresholds()
        
        # FSR Max values Labels
        Label:
            id: ltVal
            pos_hint: {'x': 0.05, 'top': 0.65}
            size_hint: 0.15, 0.1
            text: 'Left Toe:'

        Label:
            id: lhVal
            pos_hint: {'x': 0.05, 'top': 0.55}
            size_hint: 0.15, 0.1
            text: 'Left Heel:'

        Label:
            id: rtVal
            pos_hint: {'x': 0.05, 'top': 0.45}
            size_hint: 0.15, 0.1
            text: 'Right Toe:'
        
        Label:
            id: rhVal
            pos_hint: {'x': 0.05, 'top': 0.35}
            size_hint: 0.15, 0.1
            text: 'Right Heel:'

        
        # Graphs***********************************************************
        Graph:
            pos_hint: {'x': 0.5, 'top': 0.89}
            size_hint: 0.49, 0.19
            id: LTgraph
            xlabel: ''
            ylabel: 'Left Toe'
        Graph:
            pos_hint: {'x': 0.5, 'top': 0.69}
            size_hint: 0.49, 0.19
            id: LHgraph
            xlabel: ''
            ylabel: 'Left Heel'
        Graph:
            pos_hint: {'x': 0.5, 'top': 0.49}
            size_hint: 0.49, 0.19
            id: RTgraph
            xlabel: ''
            ylabel: 'Right Toe'
        Graph:
            pos_hint: {'x': 0.5, 'top': 0.29}
            size_hint: 0.49, 0.19
            id: RHgraph
            xlabel: ''
            ylabel: 'Right Heel'

<debugWindow>:
    name: 'debug'
    orientation: 'vertical'

    FloatLayout:
        Button:
            pos_hint: {'x': 0, 'top': 1}
            size_hint: 0.25, 0.1
            text: 'Serial'
            bold: True
            background_normal: ''
            background_color: [53/255, 69/255, 81/255,1]
            on_press:
                root.manager.transition.duration = '0.0'
                root.manager.current = 'serial'
        Button:
            pos_hint: {'x': 0.25, 'top': 1}
            size_hint: 0.25, 0.1
            text: 'Calibration'
            bold: True
            background_normal: ''
            background_color: [28/255, 76/255, 116/255,1]
            on_press:
                root.manager.transition.duration = '0.0'
                root.manager.current = 'calibration'
        Button:
            pos_hint: {'x': 0.50, 'top': 1}
            size_hint: 0.25, 0.1
            text: 'Debug Mode'
            bold: True
            background_normal: ''
            background_color: [100/255, 140/255, 172/255,1]
            on_press:
                root.manager.transition.duration = '0.0'
                root.manager.current = 'debug'
        Button:
            pos_hint: {'x': 0.75, 'top': 1}
            size_hint: 0.25, 0.1
            text: 'FES Mode'
            bold: True
            background_normal: ''
            background_color: [108/255, 180/255, 228/255,1]
            on_press:
                root.manager.transition.duration = '0.0'
                root.manager.current = 'fes'
        Label:
            pos_hint: {'x': 0.0, 'top': 0.1}
            size_hint: 0.25, 0.15
            text: 'Connected'
        Label:
            pos_hint: {'x': 0.5, 'top': 0.1}
            size_hint: 0.25, 0.15
            text: 'Recording'


        Graph:
            pos_hint: {'x': 0.5, 'top': 0.89}
            size_hint: 0.49, 0.19
            id: LTgraph
            xlabel: ''
            ylabel: 'Left Toe'
        Graph:
            pos_hint: {'x': 0.5, 'top': 0.69}
            size_hint: 0.49, 0.19
            id: LHgraph
            xlabel: ''
            ylabel: 'Left Heel'
        Graph:
            pos_hint: {'x': 0.5, 'top': 0.49}
            size_hint: 0.49, 0.19
            id: RTgraph
            xlabel: ''
            ylabel: 'Right Toe'
        Graph:
            pos_hint: {'x': 0.5, 'top': 0.29}
            size_hint: 0.49, 0.19
            id: RHgraph
            xlabel: ''
            ylabel: 'Right Heel'

<fesWindow>:
    name: 'fes'
    orientation: 'vertical'

    FloatLayout:
        Button:
            pos_hint: {'x': 0, 'top': 1}
            size_hint: 0.25, 0.1
            text: 'Serial'
            bold: True
            background_normal: ''
            background_color: [53/255, 69/255, 81/255,1]
            on_press:
                root.manager.transition.duration = '0.0'
                root.manager.current = 'serial'
        Button:
            pos_hint: {'x': 0.25, 'top': 1}
            size_hint: 0.25, 0.1
            text: 'Calibration'
            bold: True
            background_normal: ''
            background_color: [28/255, 76/255, 116/255,1]
            on_press:
                root.manager.transition.duration = '0.0'
                root.manager.current = 'calibration'
        Button:
            pos_hint: {'x': 0.50, 'top': 1}
            size_hint: 0.25, 0.1
            text: 'Debug Mode'
            bold: True
            background_normal: ''
            background_color: [100/255, 140/255, 172/255,1]
            on_press:
                root.manager.transition.duration = '0.0'
                root.manager.current = 'debug'
        Button:
            pos_hint: {'x': 0.75, 'top': 1}
            size_hint: 0.25, 0.1
            text: 'FES Mode'
            bold: True
            background_normal: ''
            background_color: [108/255, 180/255, 228/255,1]
            on_press:
                root.manager.transition.duration = '0.0'
                root.manager.current = 'fes'
        Label:
            pos_hint: {'x': 0.0, 'top': 0.1}
            size_hint: 0.25, 0.15
            text: 'Connected'
        Label:
            pos_hint: {'x': 0.5, 'top': 0.1}
            size_hint: 0.25, 0.15
            text: 'Recording'